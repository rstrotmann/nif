<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Observations can be pharmacokinetic observations (i.e., from the PC domain),
or any other class of observation from any other SDTM domain. The 'testcd'
specifies the value of the respective TESTCD field (e.g., 'PCTESTCD',
'VSTESTCD' or 'LBTESTCD') that defines the observation. Observation events
can be attached to an administered drug by specifying the 'parent' field.
This is required for, e.g., the time-after-dose ('TAD') and
time-after-first-dose ('TAFD') time calculation."><title>Append observation events — add_observation • nif</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Append observation events — add_observation"><meta property="og:description" content="Observations can be pharmacokinetic observations (i.e., from the PC domain),
or any other class of observation from any other SDTM domain. The 'testcd'
specifies the value of the respective TESTCD field (e.g., 'PCTESTCD',
'VSTESTCD' or 'LBTESTCD') that defines the observation. Observation events
can be attached to an administered drug by specifying the 'parent' field.
This is required for, e.g., the time-after-dose ('TAD') and
time-after-first-dose ('TAFD') time calculation."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nif</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.49.7.9011</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/importing-NIF-datasets.html">Importing NIF data sets</a>
    <a class="dropdown-item" href="../articles/making-nif-files.html">Making nif data sets from SDTM data</a>
    <a class="dropdown-item" href="../articles/multiple-dose-example.html">NIF data for a multiple-dose study</a>
    <a class="dropdown-item" href="../articles/nif-imputations.html">Imputations and assumptions</a>
    <a class="dropdown-item" href="../articles/nif-vignette.html">Creating NIF files from SDTM data</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstrotmann/nif/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Append observation events</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstrotmann/nif/blob/HEAD/R/make_nif.R" class="external-link"><code>R/make_nif.R</code></a></small>
      <div class="d-none name"><code>add_observation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Observations can be pharmacokinetic observations (i.e., from the PC domain),
or any other class of observation from any other SDTM domain. The 'testcd'
specifies the value of the respective <strong>TESTCD</strong> field (e.g., 'PCTESTCD',
'VSTESTCD' or 'LBTESTCD') that defines the observation. Observation events
can be attached to an administered drug by specifying the 'parent' field.
This is required for, e.g., the time-after-dose ('TAD') and
time-after-first-dose ('TAFD') time calculation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_observation</span><span class="op">(</span></span>
<span>  <span class="va">nif</span>,</span>
<span>  <span class="va">sdtm</span>,</span>
<span>  <span class="va">domain</span>,</span>
<span>  <span class="va">testcd</span>,</span>
<span>  analyte <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parent <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cmt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subject_filter <span class="op">=</span> <span class="st">"!ACTARMCD %in% c('SCRNFAIL', 'NOTTRT')"</span>,</span>
<span>  observation_filter <span class="op">=</span> <span class="st">"TRUE"</span>,</span>
<span>  TESTCD_field <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  DTC_field <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  DV_field <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  factor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  NTIME_lookup <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  silent <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>nif</dt>
<dd><p>A nif object.</p></dd>


<dt>sdtm</dt>
<dd><p>A sdtm object. Needs at least the 'DM' and 'VS' domains, and the
domain the observations come from.</p></dd>


<dt>domain</dt>
<dd><p>The domain as character.</p></dd>


<dt>testcd</dt>
<dd><p>The observation variable, as character.</p></dd>


<dt>analyte</dt>
<dd><p>The name for the analyte. Defaults to the 'testcd', if NULL.</p></dd>


<dt>parent</dt>
<dd><p>The name of the parent analyte for the observation as
character.</p></dd>


<dt>cmt</dt>
<dd><p>The compartment for the observation as numeric.</p></dd>


<dt>subject_filter</dt>
<dd><p>The filtering to apply to the DM domain.</p></dd>


<dt>observation_filter</dt>
<dd><p>The filtering to apply to the observation source
data.</p></dd>


<dt>TESTCD_field</dt>
<dd><p>The xxTESTCD field. Defaults to the two-character domain
name followed by 'TESTCD', if NULL.</p></dd>


<dt>DTC_field</dt>
<dd><p>The field to use as the date-time code for the observation.
Defaults to the two-character domain name followed by 'DTC', if NULL.</p></dd>


<dt>DV_field</dt>
<dd><p>the field to use as the dependent variable. Defaults to the
two-character domain name followed by 'STRESN', if NULL.</p></dd>


<dt>factor</dt>
<dd><p>Multiplier for the DV field, as numeric.</p></dd>


<dt>NTIME_lookup</dt>
<dd><p>A data frame with two columns, a column that defines the
custom nominal time information in the target domain (e.g., 'PCELTM'), and
'NTIME'. This data frame is left_joined into the observation data frame
to provide the NTIME field.</p></dd>


<dt>keep</dt>
<dd><p>Columns to keep, as character.</p></dd>


<dt>silent</dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Dummy option for
compatibility, set the global option <code><a href="nif_option.html">nif_option()</a></code> with <code>silent = TRUE</code> to
suppress messages.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A nif object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Observations can be further specified with the 'observation_filter' term. The
filter term can refer to any field of the respective SDTM domain.</p>
<p>A PK/PD model compartment can be specified with 'cmt' or will be
automatically assigned if <code>cmt = NULL</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="add_administration.html">add_administration()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">add_observation</span><span class="op">(</span><span class="va">examplinib_fe_nif</span>, <span class="va">examplinib_fe</span>, <span class="st">"pc"</span>, <span class="st">"RS2023487A"</span>,</span></span>
<span class="r-in"><span>  parent <span class="op">=</span> <span class="st">"RS2023"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Compartment for RS2023487A was not specified and has been set to 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----- NONMEM input file (NIF) object -----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> RS2023 data from one study</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1360 observations from 20 subjects</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Males: 17, females: 3 (15%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Columns:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> REF, ID, STUDYID, USUBJID, AGE, SEX, RACE, HEIGHT, WEIGHT, BMI, DTC, TIME, NTIME, TAFD, TAD, PCELTM, EVID, AMT, ANALYTE, CMT, PARENT, TRTDY, METABOLITE, DOSE, DV, MDV, ACTARMCD, IMPUTATION, PERIOD, FASTED, TREATMENT </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NIF data (selected columns):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ID   NTIME   TIME   TAD   ANALYTE      EVID   CMT   AMT   DOSE   DV         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0       0      0     RS2023       1      1     500   500    NA         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0       0      0     RS2023       0      2     0     500    0          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0       0      0     RS2023487A   0      3     0     500    0          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0.5     0.5    0.5   RS2023       0      2     0     500    249.493    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0.5     0.5    0.5   RS2023487A   0      3     0     500    130.867    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1       1      1     RS2023       0      2     0     500    858.22     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1       1      1     RS2023487A   0      3     0     500    845.214    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1.5     1.5    1.5   RS2023       0      2     0     500    1767.312   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    1.5     1.5    1.5   RS2023487A   0      3     0     500    2321.885   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    2       2      2     RS2023       0      2     0     500    2176.502   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1390 more rows</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Rainer Strotmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer></div>

  

  

  </body></html>

