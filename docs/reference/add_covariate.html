<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add time-varying covariate — add_covariate • nif</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add time-varying covariate — add_covariate"><meta name="description" content="Add a column to a nif object representing a time-varying covariate. In
contrast to observations (see add_observation()), covariates are not
captured as rows of observation events but are attached as a separate column
to the observations in a nif object. The values reflect the status of the
covariate at the time of the existing observations and are carried forward as
needed."><meta property="og:description" content="Add a column to a nif object representing a time-varying covariate. In
contrast to observations (see add_observation()), covariates are not
captured as rows of observation events but are attached as a separate column
to the observations in a nif object. The values reflect the status of the
covariate at the time of the existing observations and are carried forward as
needed."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nif</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.64.16</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/nif.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/multiple-dose-example.html">Example: Multiple-dose study</a></li>
    <li><a class="dropdown-item" href="../articles/nif-formulas.html">Data definition using formulas</a></li>
    <li><a class="dropdown-item" href="../articles/nif-imputations.html">Imputations and assumptions</a></li>
    <li><a class="dropdown-item" href="../articles/importing-nif-data.html">Importing NIF data sets</a></li>
    <li><a class="dropdown-item" href="../articles/pharmaverse-example.html">Example: Pharmaverse SDTM data</a></li>
    <li><a class="dropdown-item" href="../articles/multiple-study-example.html">More than one study in a NIF dataset</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstrotmann/nif/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add time-varying covariate</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstrotmann/nif/blob/HEAD/R/nif_covariates.R" class="external-link"><code>R/nif_covariates.R</code></a></small>
      <div class="d-none name"><code>add_covariate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add a column to a <a href="nif.html">nif</a> object representing a time-varying covariate. In
contrast to observations (see <code><a href="add_observation.html">add_observation()</a></code>), covariates are not
captured as rows of observation events but are attached as a separate column
to the observations in a nif object. The values reflect the status of the
covariate at the time of the existing observations and are carried forward as
needed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_covariate</span><span class="op">(</span></span>
<span>  <span class="va">nif</span>,</span>
<span>  <span class="va">sdtm</span>,</span>
<span>  <span class="va">domain</span>,</span>
<span>  <span class="va">testcd</span>,</span>
<span>  covariate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dtc_field <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dv_field <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  testcd_field <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  observation_filter <span class="op">=</span> <span class="st">"TRUE"</span>,</span>
<span>  cat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  duplicate_function <span class="op">=</span> <span class="va">mean</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-nif">nif<a class="anchor" aria-label="anchor" href="#arg-nif"></a></dt>
<dd><p>A nif object.</p></dd>


<dt id="arg-sdtm">sdtm<a class="anchor" aria-label="anchor" href="#arg-sdtm"></a></dt>
<dd><p>The corresponding sdtm object.</p></dd>


<dt id="arg-domain">domain<a class="anchor" aria-label="anchor" href="#arg-domain"></a></dt>
<dd><p>The domain as character.</p></dd>


<dt id="arg-testcd">testcd<a class="anchor" aria-label="anchor" href="#arg-testcd"></a></dt>
<dd><p>The xxTESTCD with xx the domain name, as character.</p></dd>


<dt id="arg-covariate">covariate<a class="anchor" aria-label="anchor" href="#arg-covariate"></a></dt>
<dd><p>The name of the covariate, defaults to the testcd if NULL.</p></dd>


<dt id="arg-dtc-field">dtc_field<a class="anchor" aria-label="anchor" href="#arg-dtc-field"></a></dt>
<dd><p>The field to use as the date-time code for the observation.
Defaults to the two-character domain name followed by 'DTC', if NULL.</p></dd>


<dt id="arg-dv-field">dv_field<a class="anchor" aria-label="anchor" href="#arg-dv-field"></a></dt>
<dd><p>The name of the DV field as character.</p></dd>


<dt id="arg-testcd-field">testcd_field<a class="anchor" aria-label="anchor" href="#arg-testcd-field"></a></dt>
<dd><p>The name of the TESTCD field. defaults to xxTESTCD (with
xx the domain code), as character.</p></dd>


<dt id="arg-observation-filter">observation_filter<a class="anchor" aria-label="anchor" href="#arg-observation-filter"></a></dt>
<dd><p>A filter term for the <code>domain</code>, as character.</p></dd>


<dt id="arg-cat">cat<a class="anchor" aria-label="anchor" href="#arg-cat"></a></dt>
<dd><p>xxCAT filter to apply, as character.</p></dd>


<dt id="arg-scat">scat<a class="anchor" aria-label="anchor" href="#arg-scat"></a></dt>
<dd><p>xxSCAT filter to apply, as character.</p></dd>


<dt id="arg-duplicate-function">duplicate_function<a class="anchor" aria-label="anchor" href="#arg-duplicate-function"></a></dt>
<dd><p>The function to apply if multiple covariate values
are found by day.</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>Suppress messages, defaults to nif_option setting if NULL.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A nif object with a new column added that contains the time-varying
covariate values. The name of this column is determined by the <code>covariate</code>
parameter (or defaults to the value of <code>testcd</code> if not specified). The
covariate values are matched to the nif object by USUBJID and date. For
each subject, missing covariate values are filled using the last observed
value (carrying forward).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Covariate data may come from any domain, and like for observations, their
source is defined by the <code>domain</code> and <code>testcd</code> arguments. Covariate
observations can be further specified with the <code>cat</code> and <code>scat</code> arguments
that refer to the 'xxCAT' and 'xxSCAT' fields of the source domain, and the
<code>observation_filter</code> argument. This may be necessary, when observations
defined by the <code>testcd</code> alone are ambiguous.</p>
<p>In general, the covariate value and the respective observation time stamp are
taken from the 'xxSTRESN' and 'xxDTC' fields of the source (where xx refers
to the domain code). Other fields can be specified by the <code>dv_field</code> and
<code>dtc_field</code> arguments.</p>
<p>The name of the covariate columns can be specified by the <code>covariate</code>
argument. By default, it is set to the 'testcd' (without any prefix).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="add_baseline.html">add_baseline()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">add_covariate</span><span class="op">(</span><span class="va">examplinib_poc_nif</span>, <span class="va">examplinib_poc</span>, <span class="st">"vs"</span>, <span class="st">"WEIGHT"</span>,</span></span>
<span class="r-in"><span>  covariate <span class="op">=</span> <span class="st">"wt"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   REF ID    STUDYID           USUBJID AGE SEX  RACE HEIGHT WEIGHT      BMI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1  1 2023000022 20230000221010001  58   1 WHITE  185.3   91.4 26.61922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2  1 2023000022 20230000221010001  58   1 WHITE  185.3   91.4 26.61922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3  1 2023000022 20230000221010001  58   1 WHITE  185.3   91.4 26.61922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   4  1 2023000022 20230000221010001  58   1 WHITE  185.3   91.4 26.61922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   5  1 2023000022 20230000221010001  58   1 WHITE  185.3   91.4 26.61922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   6  1 2023000022 20230000221010001  58   1 WHITE  185.3   91.4 26.61922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   DTC  TIME NTIME  TAFD   TAD EVID AMT    ANALYTE CMT PARENT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2001-01-13 10:36:00 0.000   0.0 0.000 0.000    1 500     RS2023   1 RS2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2001-01-13 10:36:00 0.000   0.0 0.000 0.000    0   0     RS2023   2 RS2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2001-01-13 10:36:00 0.000   0.0 0.000 0.000    0   0 RS2023487A   3 RS2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2001-01-13 11:36:00 1.000   0.5 1.000 1.000    0   0     RS2023   2 RS2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2001-01-13 11:36:00 1.000   0.5 1.000 1.000    0   0 RS2023487A   3 RS2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2001-01-13 12:04:00 1.467   1.0 1.467 1.467    0   0     RS2023   2 RS2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   TRTDY METABOLITE DOSE MDV  ACTARMCD IMPUTATION        DV BL_CREAT  BL_CRCL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1      FALSE  500   1 TREATMENT                   NA 72.78062 107.4689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1      FALSE  500   0 TREATMENT               0.0000 72.78062 107.4689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1      FALSE  500   0 TREATMENT               0.0000 72.78062 107.4689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1      FALSE  500   0 TREATMENT             636.6833 72.78062 107.4689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1      FALSE  500   0 TREATMENT             135.1259 72.78062 107.4689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     1      FALSE  500   0 TREATMENT            1844.8225 72.78062 107.4689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     wt</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 91.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 91.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 91.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 91.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 91.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 91.4</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rainer Strotmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

