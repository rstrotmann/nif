<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Auto-generate nif from sdtm object — nif_auto • nif</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Auto-generate nif from sdtm object — nif_auto"><meta name="description" content=""><meta property="og:description" content=""></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nif</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.64.16</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/nif.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/multiple-dose-example.html">Example: Multiple-dose study</a></li>
    <li><a class="dropdown-item" href="../articles/nif-formulas.html">Data definition using formulas</a></li>
    <li><a class="dropdown-item" href="../articles/nif-imputations.html">Imputations and assumptions</a></li>
    <li><a class="dropdown-item" href="../articles/importing-nif-data.html">Importing NIF data sets</a></li>
    <li><a class="dropdown-item" href="../articles/pharmaverse-example.html">Example: Pharmaverse SDTM data</a></li>
    <li><a class="dropdown-item" href="../articles/multiple-study-example.html">More than one study in a NIF dataset</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstrotmann/nif/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Auto-generate nif from sdtm object</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstrotmann/nif/blob/HEAD/R/nif_auto.R" class="external-link"><code>R/nif_auto.R</code></a></small>
      <div class="d-none name"><code>nif_auto.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nif_auto</span><span class="op">(</span></span>
<span>  <span class="va">sdtm</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  subject_filter <span class="op">=</span> <span class="st">"!ACTARMCD %in% c('SCRNFAIL', 'NOTTRT')"</span>,</span>
<span>  observation_filter <span class="op">=</span> <span class="st">"TRUE"</span>,</span>
<span>  baseline_filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  duplicates <span class="op">=</span> <span class="st">"resolve"</span>,</span>
<span>  duplicate_function <span class="op">=</span> <span class="va">mean</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  include_renal <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_hepatic <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sdtm">sdtm<a class="anchor" aria-label="anchor" href="#arg-sdtm"></a></dt>
<dd><p>A sdtm object. Needs at least the 'DM' and 'VS' domains, and the
domain the observations come from.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Formulae to define the relationships between PCTESTCD and EXTRT.</p></dd>


<dt id="arg-subject-filter">subject_filter<a class="anchor" aria-label="anchor" href="#arg-subject-filter"></a></dt>
<dd><p>The filtering to apply to the DM domain.</p></dd>


<dt id="arg-observation-filter">observation_filter<a class="anchor" aria-label="anchor" href="#arg-observation-filter"></a></dt>
<dd><p>The filtering to apply to the observation source
data.</p></dd>


<dt id="arg-baseline-filter">baseline_filter<a class="anchor" aria-label="anchor" href="#arg-baseline-filter"></a></dt>
<dd><p>A filter term to identify the baseline condition, as
character.</p></dd>


<dt id="arg-duplicates">duplicates<a class="anchor" aria-label="anchor" href="#arg-duplicates"></a></dt>
<dd><p>Selection how to deal with duplicate observations with
respect to the USUBJID, ANALYTE and DTC fields:</p><ul><li><p>'stop': Stop execution and produce error message</p></li>
<li><p>'ignore': Include duplicates in the data set</p></li>
<li><p>'identify': Return a list of duplicate entries</p></li>
<li><p>'resolve': Resolve duplicates, applying the <code>duplicate_function</code> to the
duplicate entries.</p></li>
</ul></dd>


<dt id="arg-duplicate-function">duplicate_function<a class="anchor" aria-label="anchor" href="#arg-duplicate-function"></a></dt>
<dd><p>Function to resolve duplicate values, defaults to
<code>mean</code>.</p></dd>


<dt id="arg-keep">keep<a class="anchor" aria-label="anchor" href="#arg-keep"></a></dt>
<dd><p>Columns to keep, as character.</p></dd>


<dt id="arg-include-renal">include_renal<a class="anchor" aria-label="anchor" href="#arg-include-renal"></a></dt>
<dd><p>Add baseline creatinine, CRCL and renal function
category, if possible.</p></dd>


<dt id="arg-include-hepatic">include_hepatic<a class="anchor" aria-label="anchor" href="#arg-include-hepatic"></a></dt>
<dd><p>Add baseline hepatic function category per ODWG
classification, if possible.</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>Suppress messages, as logical. Defaults to nif_option setting
if NULL.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A nif object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If no mapping is provided, <code>nif_auto()</code> will try to find matching
treatment names in EX and PCTESTCD in PC to create a basic nif object for
pharmacokinetic observations. It will fail if no EXTRT and PCTESTCD with
identical names are found.</p>
<p>If one or more mappings are provided as additional parameters,
<code>nif_auto()</code> will create respective observations. Mappings must be
provided in the form:</p>
<p><code>TESTCD ~ EXTRT</code></p>
<p>where TESTCD can be any xxTESTCD from any domain xx included in the sdtm
object. See <code><a href="testcd.html">testcd()</a></code> for an overview
on all analytes in all domains. Formulae can also specify multiple
observations to be associated with one treatment, e.g.,</p>
<p><code>RS2023 + RS2023487A ~ EXAMPLINIB</code>.</p>
<p>Multiple mappings can be given, separated by commas. The analyte name in the
nif object is automatically set to the respective TESTCD.</p>
<p><strong>IMPORTANT</strong>: If multiple analytes are specified for a treatment, it is
implicitly assumed that the first analyte corresponds to the parent analyte
for the treatment, e.g., in the case above, 'RS2023' is assumed to be the
analyte for the 'EXAMPLINIB' treatment parent compound.</p>
<p>Note that compartments (CMT) are automatically assigned. If more control over
compartments, analyte names and parent assignment is desired, stepwise
creation of a nif object using <code><a href="add_administration.html">add_administration()</a></code> and
<code><a href="add_observation.html">add_observation()</a></code> is recommended.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="testcd.html">testcd()</a></code></p>
<p><code><a href="add_administration.html">add_administration()</a></code></p>
<p><code><a href="add_observation.html">add_observation()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">nif_auto</span><span class="op">(</span><span class="va">examplinib_sad</span>, <span class="va">RS2023</span> <span class="op">~</span> <span class="va">EXAMPLINIB</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   REF ID    STUDYID           USUBJID AGE SEX  RACE HEIGHT WEIGHT     BMI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   4  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   5  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   6  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   DTC TIME NTIME TAFD TAD EVID AMT ANALYTE CMT PARENT TRTDY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2000-12-31 10:18:00  0.0   0.0  0.0 0.0    1   5  RS2023   1 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2000-12-31 10:18:00  0.0   0.0  0.0 0.0    0   0  RS2023   2 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2000-12-31 10:48:00  0.5   0.5  0.5 0.5    0   0  RS2023   2 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2000-12-31 11:18:00  1.0   1.0  1.0 1.0    0   0  RS2023   2 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2000-12-31 11:48:00  1.5   1.5  1.5 1.5    0   0  RS2023   2 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2000-12-31 12:18:00  2.0   2.0  2.0 2.0    0   0  RS2023   2 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   METABOLITE DOSE MDV ACTARMCD IMPUTATION      DV BL_CREAT  BL_CRCL BL_RENAL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      FALSE    5   1       C1                 NA  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      FALSE    5   0       C1             0.0000  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      FALSE    5   0       C1            40.7852  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      FALSE    5   0       C1            48.5530  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      FALSE    5   0       C1            44.0391  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      FALSE    5   0       C1            34.0729  67.4825 135.8911   normal</span>
<span class="r-in"><span><span class="fu">nif_auto</span><span class="op">(</span><span class="va">examplinib_sad</span>, <span class="va">RS2023</span> <span class="op">+</span> <span class="va">RS2023487A</span> <span class="op">~</span> <span class="va">EXAMPLINIB</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   REF ID    STUDYID           USUBJID AGE SEX  RACE HEIGHT WEIGHT     BMI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   4  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   5  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   6  1 2023000001 20230000011010001  43   0 WHITE  187.4     77 21.9256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   DTC TIME NTIME TAFD TAD EVID AMT    ANALYTE CMT PARENT TRTDY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2000-12-31 10:18:00  0.0   0.0  0.0 0.0    1   5     RS2023   1 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2000-12-31 10:18:00  0.0   0.0  0.0 0.0    0   0     RS2023   2 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2000-12-31 10:18:00  0.0   0.0  0.0 0.0    0   0 RS2023487A   3 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2000-12-31 10:48:00  0.5   0.5  0.5 0.5    0   0     RS2023   2 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2000-12-31 10:48:00  0.5   0.5  0.5 0.5    0   0 RS2023487A   3 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2000-12-31 11:18:00  1.0   1.0  1.0 1.0    0   0     RS2023   2 RS2023     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   METABOLITE DOSE MDV ACTARMCD IMPUTATION      DV BL_CREAT  BL_CRCL BL_RENAL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      FALSE    5   1       C1                 NA  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      FALSE    5   0       C1             0.0000  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       TRUE    5   0       C1             0.0000  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      FALSE    5   0       C1            40.7852  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       TRUE    5   0       C1            13.8228  67.4825 135.8911   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      FALSE    5   0       C1            48.5530  67.4825 135.8911   normal</span>
<span class="r-in"><span><span class="fu">nif_auto</span><span class="op">(</span><span class="va">examplinib_sad</span>, <span class="va">RS2023</span> <span class="op">+</span> <span class="va">WEIGHT</span> <span class="op">~</span> <span class="va">EXAMPLINIB</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   REF ID    STUDYID           USUBJID AGE SEX                      RACE HEIGHT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1  1 2023000001 20230000011010001  43   0                     WHITE  187.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2  2 2023000001 20230000011010002  49   0                     WHITE  189.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3  3 2023000001 20230000011010003  46   0 BLACK OR AFRICAN AMERICAN  174.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   4  4 2023000001 20230000011010005  23   0                     WHITE  168.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   5  5 2023000001 20230000011010006  47   0 BLACK OR AFRICAN AMERICAN  174.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   6  6 2023000001 20230000011010007  31   0                     WHITE  172.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   WEIGHT      BMI                 DTC TIME NTIME TAFD TAD EVID AMT ANALYTE CMT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   77.0 21.92560 2000-12-31 10:18:00    0     0    0   0    1   5  WEIGHT   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   72.8 20.25138 2000-12-29 10:30:00    0     0    0   0    1   5  WEIGHT   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   80.0 26.24228 2000-12-29 09:22:00    0     0    0   0    1   5  WEIGHT   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   78.8 27.85314 2001-01-02 09:22:00    0     0    0   0    1  10  WEIGHT   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   89.5 29.52742 2001-01-03 12:24:00    0     0    0   0    1  10  WEIGHT   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   90.0 30.24575 2001-01-02 10:00:00    0     0    0   0    1  10  WEIGHT   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   PARENT TRTDY METABOLITE DOSE MDV ACTARMCD IMPUTATION DV BL_CREAT  BL_CRCL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 WEIGHT     1      FALSE    5   1       C1            NA 67.48250 135.8911</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 WEIGHT     1      FALSE    5   1       C1            NA 65.09655 124.9495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 WEIGHT     1      FALSE    5   1       C1            NA 90.12031 102.4507</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 WEIGHT     1      FALSE   10   1       C2            NA 57.91688 195.4459</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 WEIGHT     1      FALSE   10   1       C2            NA 75.77307 134.8686</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 WEIGHT     1      FALSE   10   1       C2            NA 70.01583 172.0254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   BL_RENAL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   normal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   normal</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rainer Strotmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

