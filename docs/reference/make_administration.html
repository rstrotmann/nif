<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compile administration data frame — make_administration • nif</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compile administration data frame — make_administration"><meta name="description" content="Compile administration data frame"><meta property="og:description" content="Compile administration data frame"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nif</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.52.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/creating-multiple-study-nif.html">creating-multiple-study-nif</a></li>
    <li><a class="dropdown-item" href="../articles/multiple-dose-example.html">NIF data for a multiple-dose study</a></li>
    <li><a class="dropdown-item" href="../articles/nif-imputations.html">Imputations and assumptions</a></li>
    <li><a class="dropdown-item" href="../articles/nif-vignette.html">Creating NIF files from SDTM data</a></li>
    <li><a class="dropdown-item" href="../articles/tests_and_coverage.html">Tests and Coverage</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstrotmann/nif/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compile administration data frame</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstrotmann/nif/blob/HEAD/R/nif_administrations.R" class="external-link"><code>R/nif_administrations.R</code></a></small>
      <div class="d-none name"><code>make_administration.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Compile administration data frame</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_administration</span><span class="op">(</span></span>
<span>  <span class="va">sdtm</span>,</span>
<span>  <span class="va">extrt</span>,</span>
<span>  analyte <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  cmt <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  subject_filter <span class="op">=</span> <span class="st">"!ACTARMCD %in% c('SCRNFAIL', 'NOTTRT')"</span>,</span>
<span>  cut_off_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep <span class="op">=</span> <span class="st">""</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sdtm">sdtm<a class="anchor" aria-label="anchor" href="#arg-sdtm"></a></dt>
<dd><p>A sdtm object.</p></dd>


<dt id="arg-extrt">extrt<a class="anchor" aria-label="anchor" href="#arg-extrt"></a></dt>
<dd><p>The EXTRT for the administration, as character.</p></dd>


<dt id="arg-analyte">analyte<a class="anchor" aria-label="anchor" href="#arg-analyte"></a></dt>
<dd><p>The name of the analyte as character.</p></dd>


<dt id="arg-cmt">cmt<a class="anchor" aria-label="anchor" href="#arg-cmt"></a></dt>
<dd><p>The compartment for the administration as numeric.</p></dd>


<dt id="arg-subject-filter">subject_filter<a class="anchor" aria-label="anchor" href="#arg-subject-filter"></a></dt>
<dd><p>The filtering to apply to the DM domain, as string,</p></dd>


<dt id="arg-cut-off-date">cut_off_date<a class="anchor" aria-label="anchor" href="#arg-cut-off-date"></a></dt>
<dd><p>The data cut-off date as Posix date-time.</p></dd>


<dt id="arg-keep">keep<a class="anchor" aria-label="anchor" href="#arg-keep"></a></dt>
<dd><p>Columns to keep after cleanup, as character.</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>Suppress messages, defaults to nif_option standard, if NULL.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A discussion on EC vs EX is provided <a href="https://www.cdisc.org/kb/ecrf/exposure-collected#:~:text=In%20the%20SDTMIG%2C%20the%20Exposure,data%20collected%20on%20the%20CRF." class="external-link">here</a></p>
    </div>
    <div class="section level2">
    <h2 id="time-imputations-and-filtering">Time imputations and filtering<a class="anchor" aria-label="anchor" href="#time-imputations-and-filtering"></a></h2>
    <p>The following time imputations and filters are applied in the given
order:</p><div class="section">
<h3 id="-impute-exendtc-to-rfendtc-">1. <code><a href="impute_exendtc_to_rfendtc.html">impute_exendtc_to_rfendtc()</a></code><a class="anchor" aria-label="anchor" href="#-impute-exendtc-to-rfendtc-"></a></h3>


<p>If EXENDTC is missing in the last administration episode for a given subject,
it is replaced with DM.RFENDTC, if available.</p>
</div>

<div class="section">
<h3 id="-filter-exstdtc-after-exendtc-">2. <code><a href="filter_EXSTDTC_after_EXENDTC.html">filter_EXSTDTC_after_EXENDTC()</a></code><a class="anchor" aria-label="anchor" href="#-filter-exstdtc-after-exendtc-"></a></h3>


<p>Administration episodes in which EXSTDTC is after EXENDT are deleted from the
data set.</p>
</div>

<div class="section">
<h3 id="-impute-exendtc-to-cutoff-">3. <code><a href="impute_exendtc_to_cutoff.html">impute_exendtc_to_cutoff()</a></code><a class="anchor" aria-label="anchor" href="#-impute-exendtc-to-cutoff-"></a></h3>


<p>If in the last administration episode per subject and treatment, EXENDTC is
missing, for example because the treatment is still ongoing at the time of
the SDTM generation, EXENDTC is replaced with the cut-off date.</p>
</div>

<div class="section">
<h3 id="-impute-missing-exendtc-">4. <code><a href="impute_missing_exendtc.html">impute_missing_exendtc()</a></code><a class="anchor" aria-label="anchor" href="#-impute-missing-exendtc-"></a></h3>


<p>If in any further episode, EXENDTC is missing, it is replaced with the day
before the subsequent administration episode start (EXSTDTC). It should be
understood that this reflects a rather strong assumption, i.e., that the
treatment was continued into the next administration episode. This imputation
therefore issues a warning that cannot be suppressed.</p>
</div>

<div class="section">
<h3 id="-expand-administration-episodes">5. Expand administration episodes<a class="anchor" aria-label="anchor" href="#-expand-administration-episodes"></a></h3>


<p>All administration episodes, i.e., the intervals between EXSTDTC and EXENDTC
for a given row in EX, are expanded into a sequence of rows with one
administration day per row. The administration times for all rows except for
the last are taken from the time information in EXSTDTD, whereas the time
for the last administration event in the respective episode is taken from the
time information in EXENDTC.</p>
<p><strong>Development note:</strong> In the present version of the function, once-daily (QD)
dosing is assumed. Multiple-daily dosings are not supported. In future
versions, the dosing frequency provided in <code>EXDOSFRQ</code> may be taken into
account to adequately handle multiple daily administrations.</p>
</div>

<div class="section">
<h3 id="-impute-admin-times-from-pcrftdtc-">6. <code><a href="impute_admin_times_from_pcrftdtc.html">impute_admin_times_from_pcrftdtc()</a></code><a class="anchor" aria-label="anchor" href="#-impute-admin-times-from-pcrftdtc-"></a></h3>


<p>For administration days for which PK sampling events are recorded in PC, the
administration time is taken from PC.PCRFTDTC, if this field is available.</p>
<p><strong>Development note:</strong> This may be updated in future versions of the function
to work with multiple-daily administrations.</p>
</div>

<div class="section">
<h3 id="-carry-forward-time">7. Carry forward time<a class="anchor" aria-label="anchor" href="#-carry-forward-time"></a></h3>


<p>For all administration events per subject and treatment, missing time
information is finally carried forward from available time information.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="add_administration.html">add_administration()</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rainer Strotmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

