<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="nif">
<title>Imputations and assumptions used by make_nif() • nif</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Imputations and assumptions used by make_nif()">
<meta property="og:description" content="nif">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nif</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.48.0.9004</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/importing-NIF-datasets.html">Importing NIF data sets</a>
    <a class="dropdown-item" href="../articles/making-nif-files.html">Making nif data sets from SDTM data</a>
    <a class="dropdown-item" href="../articles/multiple-dose-example.html">Example: NIF data for a multiple-dose study</a>
    <a class="dropdown-item" href="../articles/nif-imputations.html">Imputations and assumptions used by make_nif()</a>
    <a class="dropdown-item" href="../articles/nif-vignette.html">Creating NIF files from SDTM data</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstrotmann/nif/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Imputations and assumptions used by make_nif()</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstrotmann/nif/blob/HEAD/vignettes/nif-imputations.Rmd" class="external-link"><code>vignettes/nif-imputations.Rmd</code></a></small>
      <div class="d-none name"><code>nif-imputations.Rmd</code></div>
    </div>

    
    
<p>This vignette outlines the inner workings of <code><a href="../reference/make_nif.html">make_nif()</a></code>
to help understanding what assumptions are made by the function and how
e.g., time information is derived.</p>
<div class="section level2">
<h2 id="baseline-covariates">Baseline covariates<a class="anchor" aria-label="anchor" href="#baseline-covariates"></a>
</h2>
<p>The subjects’ height and body weight are included as standard fields
in the NIF file. They are derived from the ‘VS’ domain, filtered by
<code>EPOCH=="SCREENING"</code>. If multiple measurements with this
condition are included, the mean value is used.</p>
<p>The subjects’ age is derived from the <code>AGE</code> field in the
‘DM’ domain, or, if not available, as the difference between
<code>RFSTDTC</code> and <code>BRTHDTC</code> from ‘DM’.</p>
</div>
<div class="section level2">
<h2 id="observations">Observations<a class="anchor" aria-label="anchor" href="#observations"></a>
</h2>
<div class="section level3">
<h3 id="specimen">Specimen<a class="anchor" aria-label="anchor" href="#specimen"></a>
</h3>
<p>The observations included in the NIF file are the pharmacokinetic
concentrations included in the ‘PC’ domain. Depending on the design of
the underlying clinical study, there may be data from different specimen
types, e.g., blood, plasma, urine, feces. The specimen type to be
included in the NIF file can be explicitly provided to
<code><a href="../reference/make_nif.html">make_nif()</a></code>, e.g.,
<code>make_nif(sdtm.data, spec="PLASMA")</code>. If not provided, the
most likely is used, i.e., either “PLASMA” or “BLOOD”.</p>
</div>
<div class="section level3">
<h3 id="measurements-not-done">Measurements not done<a class="anchor" aria-label="anchor" href="#measurements-not-done"></a>
</h3>
<p>If the <em>permissible</em> field <code>PCSTAT</code> is used in the
PC domain, providing information on the status of the pharmacokinetic
samples, data records with <code>PCSTAT=="NOT DONE"</code> are
discarded.</p>
</div>
<div class="section level3">
<h3 id="observation-time">Observation time<a class="anchor" aria-label="anchor" href="#observation-time"></a>
</h3>
<p>The actual absolute date and time for each observation is taken from
the <code>PCDTC</code> field. The nominal (planned) time is taken from
the <code>PCELTM</code> (planned elapsed time) field. This
<em>permissible</em> variable has the format “PTxxH” where <em>xx</em>
is the time since the last administration.</p>
</div>
<div class="section level3">
<h3 id="other-fields-required-by-nonmem">Other fields required by NONMEM<a class="anchor" aria-label="anchor" href="#other-fields-required-by-nonmem"></a>
</h3>
<p>For all observations, the compartment (<code>CMT</code>) is fixed to
2. Depending on the further analysis, e.g., the structural model used in
the nonlinear mixed-effects modeling, the compartment may need to be
changed, or different compartments for the parent compound and
metabolites may need to be defined.</p>
<p>The <code>DV</code> field in the NIF output is set to
<code>PCSTRESN/1000</code>. This assumes that the pharmacokinetic
concentrations are given in ng/ml units. As per the NONMEM conventions,
<code>LNDV</code> is the natural log of <code>DV</code>.
<code>MDV</code> (<em>missing dependent variable</em>) is set to 1 for
entries with missing <code>DV</code>.</p>
<p>For all observations, <code>EVID</code> is fixed to zero.</p>
</div>
<div class="section level3">
<h3 id="sex-recoding">SEX recoding<a class="anchor" aria-label="anchor" href="#sex-recoding"></a>
</h3>
<p>As per the SDTM definitions, the subjects’ sex is encoded in
<code>SEX</code> as “M” or “F”. In the NIF output file, “M” is recoded
to “0” and “F” to “1” to facilitate downstream analysis.</p>
</div>
</div>
<div class="section level2">
<h2 id="administrations">Administrations<a class="anchor" aria-label="anchor" href="#administrations"></a>
</h2>
<p>The administrations included in the NIF file come from the EX SDTM
domain, but only administration data from subjects who have
corresponding observations are included.</p>
<div class="section level3">
<h3 id="date-expansion">Date expansion<a class="anchor" aria-label="anchor" href="#date-expansion"></a>
</h3>
<p>Depending on the study type (single vs. multiple administrations),
the EX domain may define administration intervals, i.e., from
<code>EXSTDTC</code> to <code>EXENDTC</code>. A typical example is shown
below (some columns omitted for clarity):</p>
<pre><code>STUDYID     USUBJID           EXDOSE  EXDOSFRQ  EXSTDTC           EXENDTC
2023000400  0230004001010002  500     ONCE      2023-08-18T08:06  2023-08-21T08:43</code></pre>
<p>During NIF generation, <code><a href="../reference/make_nif.html">make_nif()</a></code> expands the time range
to individual rows for each day. The respective administration time is
assumed to be the administration time noted for the start date for the
whole administration interval (i.e., 8:06 in the above example), except
for the end date for which the time specified for that date is taken
(i.e., 8:43 in the above example).</p>
</div>
<div class="section level3">
<h3 id="analyte-mapping">Analyte mapping<a class="anchor" aria-label="anchor" href="#analyte-mapping"></a>
</h3>
<p>To distinguish administrations and observations relating to multiple
drugs, <code><a href="../reference/make_nif.html">make_nif()</a></code> introduces the field <code>ANALYTE</code>
into the NIF output file. Its values correspond to the values used in
<code>PCTESTCD</code> in the PC domain. The SDTM variable in the EX
domain that defines the administered drug is <code>EXTRT</code>, and in
many cases, its values do not correspond to the values defined in
<code>PCTESTCD</code> for the respective parent compound analytes. In
order to associate administrations to the parent plasma concentrations,
mapping information must be provided on the level of the
<code>sdtm</code> object (see <code>?add_mapping()</code> for additional
information).</p>
</div>
</div>
<div class="section level2">
<h2 id="data-cut-off-and-date-and-time-imputations">Data cut-off and date and time imputations<a class="anchor" aria-label="anchor" href="#data-cut-off-and-date-and-time-imputations"></a>
</h2>
<p>During the creation of the NIF file, a global cut-off date is defined
that reflects the last observation across all subjects in the PC
domain.</p>
<p>In ongoing studies, the treatment end date for some records may not
be defined, e.g., <code>EXENDTC</code> is empty in the respective record
in the <code>EX</code> domain. This is often the case when the treatment
is still ongoing at the time of the data cut-off. In these records,
<code>EXENDTC</code> is set to the cut-off date.</p>
<div class="section level3">
<h3 id="missing-treatment-start-time">Missing treatment start time<a class="anchor" aria-label="anchor" href="#missing-treatment-start-time"></a>
</h3>
<p>Specifically for administrations that are followed by observations on
the same day, the administration time point is critical information to
calculate precise post-dose time points. If time information is not
included in EX for such days (see the example below),
<code><a href="../reference/make_nif.html">make_nif()</a></code> cross references with the <code>PCRFDTC</code>
variable in PC, i.e., the reference time recorded the observations on
this day.</p>
<pre><code>STUDYID     USUBJID           EXDOSE  EXDOSFRQ  EXSTDTC     EXENDTC
2023000400  0230004001010002  500     ONCE      2023-08-18  2023-08-21T08:43</code></pre>
<p>That time is then also carried forward to the following
administrations in the whole administration interval.</p>
</div>
<div class="section level3">
<h3 id="missing-treatment-end-time">Missing treatment end time<a class="anchor" aria-label="anchor" href="#missing-treatment-end-time"></a>
</h3>
<p>In some cases, no end time is included in <code>EXENDTC</code>, see
the example below. In these cases, <code><a href="../reference/make_nif.html">make_nif()</a></code> assumes the
end time to be the same for <code>EXSTDTC</code> and
<code>EXENDTC</code>.</p>
<pre><code>STUDYID     USUBJID           EXDOSE  EXDOSFRQ  EXSTDTC           EXENDTC
2023000400  0230004001010002  500     ONCE      2023-08-18T08:06  2023-08-21</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="time">TIME<a class="anchor" aria-label="anchor" href="#time"></a>
</h2>
<p>As per the NONMEM requirements, the <code>TIME</code> variable in the
NIF file gives the elapsed time in hours since the individual first
recorded event, most often the first pre-dose observation or the first
administration.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Rainer Strotmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
