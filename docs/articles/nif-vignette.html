<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="nif">
<title>Creating NIF files from SDTM data • nif</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating NIF files from SDTM data">
<meta property="og:description" content="nif">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nif</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.49.7.9039</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/multiple-dose-example.html">NIF data for a multiple-dose study</a>
    <a class="dropdown-item" href="../articles/nif-imputations.html">Imputations and assumptions</a>
    <a class="dropdown-item" href="../articles/nif-vignette.html">Creating NIF files from SDTM data</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstrotmann/nif/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Creating NIF files from SDTM data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstrotmann/nif/blob/HEAD/vignettes/nif-vignette.Rmd" class="external-link"><code>vignettes/nif-vignette.Rmd</code></a></small>
      <div class="d-none name"><code>nif-vignette.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">INTRODUCTION<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This is a basic tutorial on using the <code>nif</code> package to
create NONMEM Input File (NIF) data sets from Study Data Tabulation
Model- (SDTM) formatted data.</p>
<div class="section level3">
<h3 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h3>
<p>Following current regulatory standards, clinical study data are
commonly provided in SDTM format, an observation-based data tabulation
format in which logically related observations are organized into
topical collections (domains). SDTM is defined and maintained by the <a href="https://www.cdisc.org/standards/foundational/sdtm" class="external-link">Clinical Data
Interchange Standards Consortium (CDISC)</a>.</p>
<p>For many exploratory analyses, data from different SDTM domains need
to be combined. For example, demographic and pharmacokinetic
concentration data from the DM and PC domains are both needed to
evaluate exposure by age. More complex analyses like population-level PK
and PK/PD analyses may include further data, e.g., clinical laboratory,
vital sign, or biomarker data.</p>
<p>NONMEM and other commonly used modeling software packages expect the
input data integrated into a (long) data table format with strict
requirements to the formatting and nomenclature of the variables (see,
e.g., <a href="https://doi.org/10.1002/psp4.12404" class="external-link">Bauer, CPT
Pharmacometrics Syst. Pharmacol. (2019)</a> for an introduction). The
input data file for these analyses is often casually referred to as a
‘NONMEM input file’ or ‘NIF file’, hence the name of this package.</p>
<p>Depending on the nature of the analysis, some of the input variables,
may be easily and automatically derived from the SDTM-formatted source
data, e.g., ‘DOSE’ or ‘DV’ (the dependent variable for pharmacokinetic
observations), or demographic covariates like AGE, SEX or RACE.</p>
<p>Other fields of the input data set may require study-specific
considerations, for example the calculation of baseline renal or hepatic
function categories, definition of specific treatment conditions by
study arm, or the encoding of adverse events or concomitant medications
of interest as categorical covariates.</p>
<p>In contrast to the latter variables which often need manual and
study-specific data programming, the core NIF data set that integrates
pharmacokinetic observations, drug administration information and a
standard set of baseline covariates can often be generated automatically
without too much study-specific user input. It should be however noted
that even for such basic NIF files, missing data points and certain
inconsistencies may need to be resolved to get to an analysis-ready data
set, particularly so if the SDTM data stems from an ongoing clinical
study and has not been fully cleaned yet. More on this point later.</p>
<p>This package is intended to facilitate the creation of analysis data
sets (‘NIF data sets’) from SDTM-formatted clinical data. In addition,
it includes a set of functions and tools to explore SDTM and NIF data
sets.</p>
<p>The first part of this tutorial describes how to import SDTM data
into a <code>sdtm</code> object, and how to explore clinical data on the
SDTM level.</p>
<p>The second part of this tutorial walks through the generation of a
sample NIF data set from SDTM data and its initial exploratory
analysis.</p>
<p>This tutorial contains live code that depends on the following R
packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstrotmann/nif" class="external-link">nif</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="sdtm-data">SDTM DATA<a class="anchor" aria-label="anchor" href="#sdtm-data"></a>
</h2>
<div class="section level3">
<h3 id="import-sdtm-data">Import SDTM data<a class="anchor" aria-label="anchor" href="#import-sdtm-data"></a>
</h3>
<p>As a minimum, the following SDTM domains are expected to create a
basic NIF file:</p>
<ul>
<li>DM - demographic data, mostly age, sex and other variables per
subject</li>
<li>VS - vital signs, particularly weight and height at enrollment, per
subject</li>
<li>EX - exposure information for the administered drugs, e.g., the time
of administration, dose, etc.</li>
<li>PC - pharmacokinetic concentrations for the analytes associated with
the administered drugs</li>
</ul>
<p>In the most common use case, the respective SDTM data files, e.g., as
*.sas7bdat files, are copied into one folder (in the below example into
<code>path/to/sdtm/data</code>), and can then be loaded using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_sdtm.html">read_sdtm</a></span><span class="op">(</span><span class="st">"path/to/sdtm/data"</span><span class="op">)</span></span></code></pre></div>
<p>Based on the above, the minimum required SDTM files are
<code>dm.dat7bdat</code>, <code>vs.dat7bdat</code>,
<code>ex.dat7bdat</code> and <code>pc.dat7bdat</code>. However, if
additional covariates from AE, LB or any other SDTM domain are to be
added, an explicit list of the domains can be provided to the loading
function, e.g.,</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_sdtm.html">read_sdtm</a></span><span class="op">(</span><span class="st">"path/to/sdtm/data"</span>, domain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dm"</span>, <span class="st">"vs"</span>, <span class="st">"ex"</span>, <span class="st">"pc"</span>, <span class="st">"lb"</span>, <span class="st">"ae"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The return value of this function is a <code>sdtm</code> object.</p>
</div>
<div class="section level3">
<h3 id="sdtm-objects">SDTM objects<a class="anchor" aria-label="anchor" href="#sdtm-objects"></a>
</h3>
<p><code>Sdtm</code> objects are essentially lists of the SDTM domains
from a particular clinical study, plus some metadata. The easiest way of
creating <code>sdtm</code> objects is by importing the SDTM data using
<code><a href="../reference/read_sdtm_sas.html">read_sdtm_sas()</a></code> or <code><a href="../reference/read_sdtm_xpt.html">read_sdtm_xpt()</a></code> as shown
above.</p>
<p>The <code>nif</code> package includes sample SDTM data sets for
demonstration purposes. These data do not come from actual clinical
studies but are fully synthetic data sets from a fictional single
ascending dose (SAD) study (<code>examplinib_sad</code>), a fictional
food effect (FE) study (<code>examplinib_fe</code>), and a fictional
single-arm proof-of-concept (POC) study with multiple-dose
administrations (<code>examplinib_poc</code>).</p>
<p>The original SDTM data can be retrieved from <code>sdtm</code>
objects by accessing the individual SDTM domains like demonstrated below
for the DM domain of the <code>examplinib_fe</code> data object:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>examplinib_fe <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="fu">domain</span>(<span class="st">"dm"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  SITEID  SUBJID         ACTARM ACTARMCD          RFICDTC          RFSTDTC</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="dv">1</span>    <span class="dv">102</span> <span class="dv">1020001</span>   Fed <span class="sc">-</span> Fasted       BA <span class="dv">2000-12</span><span class="sc">-</span>21T10<span class="sc">:</span><span class="dv">29</span> <span class="dv">2000-12</span><span class="sc">-</span>26T10<span class="sc">:</span><span class="dv">29</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">104</span> <span class="dv">1040001</span>   Fed <span class="sc">-</span> Fasted       BA <span class="dv">2000-12</span><span class="sc">-</span>22T10<span class="sc">:</span><span class="dv">24</span> <span class="dv">2000-12</span><span class="sc">-</span>28T10<span class="sc">:</span><span class="dv">24</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="dv">3</span>    <span class="dv">102</span> <span class="dv">1020002</span> Screen Failure SCRNFAIL <span class="dv">2000-12</span><span class="sc">-</span>22T09<span class="sc">:</span><span class="dv">18</span>             <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>          RFXSTDTC    STUDYID           USUBJID SEX AGE  AGEU COUNTRY DOMAIN</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2000-12</span><span class="sc">-</span>26T10<span class="sc">:</span><span class="dv">29</span> <span class="dv">2023000400</span> <span class="dv">20230004001020001</span>   M  <span class="dv">22</span> YEARS     DEU     DM</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="dv">2</span> <span class="dv">2000-12</span><span class="sc">-</span>28T10<span class="sc">:</span><span class="dv">24</span> <span class="dv">2023000400</span> <span class="dv">20230004001040001</span>   M  <span class="dv">43</span> YEARS     DEU     DM</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="dv">3</span>             <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> <span class="dv">2023000400</span> <span class="dv">20230004001020002</span>   M  <span class="dv">55</span> YEARS     DEU     DM</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>             ARM    ARMCD                      RACE ETHNIC          RFENDTC</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="dv">1</span>   Fed <span class="sc">-</span> Fasted       BA                     WHITE        <span class="dv">2001-01</span><span class="sc">-</span>08T10<span class="sc">:</span><span class="dv">29</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="dv">2</span>   Fed <span class="sc">-</span> Fasted       BA                     WHITE        <span class="dv">2001-01</span><span class="sc">-</span>10T10<span class="sc">:</span><span class="dv">24</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="dv">3</span> Screen Failure SCRNFAIL BLACK OR AFRICAN AMERICAN                    <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span></code></pre></div>
<p>The most relevant domains, “dm”, “vs”, “ex” and “pc”, can also be
accessed directly, e.g.:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dm</span> <span class="op">&lt;-</span> <span class="va">examplinib_fe</span><span class="op">$</span><span class="va">dm</span></span></code></pre></div>
<p>Printing an <code>sdtm</code> object shows some of its basic
properties:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>examplinib_fe</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="sc">--------</span> SDTM data set summary <span class="sc">--------</span> </span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>Study <span class="dv">2023000400</span> with <span class="dv">20</span> subjects providing PC data.</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>Subjects per domain<span class="sc">:</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a> DOMAIN   N    </span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a> dm       <span class="dv">27</span>   </span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a> vs       <span class="dv">27</span>   </span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a> ex       <span class="dv">20</span>   </span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a> pc       <span class="dv">20</span>   </span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a> lb       <span class="dv">27</span>   </span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a> pp       <span class="dv">20</span>   </span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="fu">Arms</span> (DM)<span class="sc">:</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a> ACTARM           ACTARMCD   </span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a> Fed <span class="sc">-</span> Fasted     BA         </span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a> Screen Failure   SCRNFAIL   </span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a> Fasted <span class="sc">-</span> Fed     AB         </span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="fu">Treatments</span> (EX)<span class="sc">:</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a> EXTRT        </span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a> EXAMPLINIB    </span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a><span class="fu">Specimens</span> (PC)<span class="sc">:</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a> none </span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a><span class="fu">Analytes</span> (PC)<span class="sc">:</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a> PCTEST       PCTESTCD     </span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a> RS2023       RS2023       </span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a> RS2023487A   RS2023487A    </span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>Treatment<span class="sc">-</span>to<span class="sc">-</span>analyte mappings<span class="sc">:</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a> EXTRT        PCTESTCD   ANALYTE   </span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a> EXAMPLINIB   RS2023     RS2023     </span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a></span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a>Parent<span class="sc">-</span>to<span class="sc">-</span>metabolite mappings<span class="sc">:</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a> none </span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a></span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a>Time mappings<span class="sc">:</span></span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a> none </span></code></pre></div>
<p>Note the ‘Treatment-to-analyte mappings’ and ‘Parent-to-metabolite
mapping’ tables in the above output, we will get back to this when
creating a NIF data set from these SDTM data.</p>
<p>In addition to a general overview, general demographic data for
individual subjects (by their USUBJID) can be extracted as shown
below:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>examplinib_fe <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">subject_info</span>(<span class="st">"20230004001050001"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>         [,<span class="dv">1</span>]             </span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>SITEID   <span class="dv">105</span>              </span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>SUBJID   <span class="dv">1050001</span>          </span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>ACTARM   Fasted <span class="sc">-</span> Fed     </span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>ACTARMCD AB               </span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>RFICDTC  <span class="dv">2000-12</span><span class="sc">-</span>24T11<span class="sc">:</span><span class="dv">59</span> </span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>RFSTDTC  <span class="dv">2001-01</span><span class="sc">-</span>01T11<span class="sc">:</span><span class="dv">59</span> </span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>RFXSTDTC <span class="dv">2001-01</span><span class="sc">-</span>01T11<span class="sc">:</span><span class="dv">59</span> </span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>STUDYID  <span class="dv">2023000400</span>       </span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>USUBJID  <span class="dv">20230004001050001</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>SEX      M                </span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>AGE      <span class="dv">54</span>               </span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>AGEU     YEARS            </span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>COUNTRY  DEU              </span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>DOMAIN   DM               </span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>ARM      Fasted <span class="sc">-</span> Fed     </span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>ARMCD    AB               </span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a>RACE     WHITE            </span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>ETHNIC                    </span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a>RFENDTC  <span class="dv">2001-01</span><span class="sc">-</span>14T11<span class="sc">:</span><span class="dv">59</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sdtm-suggestions">SDTM suggestions<a class="anchor" aria-label="anchor" href="#sdtm-suggestions"></a>
</h3>
<p>SDTM data may be incomplete, e.g., when emerging data that have not
yet been fully cleaned are analyzed. In addition, some study-specific
data may be encoded in a non-standardized way, e.g., information on
study parts, cohorts, treatment conditions, etc..</p>
<p>Such data fields may need study-specific considerations and manual
imputations during the creating of the NIF data set. To help deciding
which study-specific factors need to be addressed, the <code>nif</code>
package includes functions to explore the structure of SDTM data.</p>
<p>As a starting point, <code><a href="../reference/suggest.html">suggest()</a></code> can provide useful
suggestions for manual imputations for a <code>sdtm</code> object:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">suggest</span>(examplinib_fe)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fl">1.</span> Only needed <span class="cf">if</span> you want to generate nif objects <span class="fu">automatically</span> (using</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>   <span class="st">'nif_auto()'</span>)<span class="sc">:</span> There are <span class="dv">1</span> <span class="fu">treatments</span> (EXTRT) <span class="cf">in</span> <span class="st">'EX'</span>, and <span class="dv">2</span> pharmacokinetic</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>   <span class="fu">analytes</span> (PCTESTCD) <span class="cf">in</span> <span class="st">'PC'</span><span class="sc">:</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>       EXTRT        </span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>       EXAMPLINIB   </span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>       PCTEST       PCTESTCD     </span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>       RS2023       RS2023       </span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>       RS2023487A   RS2023487A   </span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>   To associate treatments with their respective parent analyte, consider adding</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>   analyte <span class="fu">mapping</span>(s) to the sdtm object using the below code <span class="fu">snippet</span> (replace</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>   <span class="st">'x'</span> with the corresponding PCTESTCD)<span class="sc">:</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a> [<span class="dv">0</span>;34m       <span class="sc">%&gt;%</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a> [<span class="dv">0</span>;34m         <span class="fu">add_analyte_mapping</span>(<span class="st">'EXAMPLINIB'</span>, <span class="st">'x'</span>) [0m</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>   For further information see the documentation to <span class="st">'add_analyte_mapping</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="st">   ('</span>?add_analyte_mapping<span class="st">').</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="st">2. Only needed if you want to generate nif objects automatically (using</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="st">   '</span><span class="fu">nif_auto</span>()<span class="st">'): There are more pharmacokinetic analytes in '</span>PC<span class="st">' than</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="st">   treatments in '</span>EX<span class="st">'. If you want to include pharmacokinetic observations</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a><span class="st">   of metabolites, you can add metabolite mapping(s) to the sdtm object</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a><span class="st">   using '</span>add_metabolite_mapping<span class="st">' (see ?add_metabolite_mapping for further</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a><span class="st">   information).</span></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a><span class="st">3. There are 1 different treatments in '</span>EX<span class="st">' (see below). Consider adding them to</span></span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a><span class="st">   the nif object using '</span><span class="fu">add_administration</span>()<span class="st">'.</span></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a></span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a><span class="st">       EXTRT        </span></span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a><span class="st">       EXAMPLINIB   </span></span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a><span class="st">4. There are 2 different pharmacokinetic observations in '</span>PC<span class="st">' (see below).</span></span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a><span class="st">   Consider adding them to the nif object using '</span><span class="fu">add_observation</span>()<span class="st">'.</span></span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a></span>
<span id="cb8-31"><a href="#cb8-31" tabindex="-1"></a><span class="st">       PCTESTCD     </span></span>
<span id="cb8-32"><a href="#cb8-32" tabindex="-1"></a><span class="st">       RS2023       </span></span>
<span id="cb8-33"><a href="#cb8-33" tabindex="-1"></a><span class="st">       RS2023487A   </span></span>
<span id="cb8-34"><a href="#cb8-34" tabindex="-1"></a><span class="st">5. There are 3 arms defined in DM (see below). Consider defining a PART or ARM</span></span>
<span id="cb8-35"><a href="#cb8-35" tabindex="-1"></a><span class="st">   variable in the nif dataset, filtering for a particular arm, or defining a</span></span>
<span id="cb8-36"><a href="#cb8-36" tabindex="-1"></a><span class="st">   covariate based on ACTARMCD.</span></span>
<span id="cb8-37"><a href="#cb8-37" tabindex="-1"></a></span>
<span id="cb8-38"><a href="#cb8-38" tabindex="-1"></a><span class="st">       ACTARM           ACTARMCD   </span></span>
<span id="cb8-39"><a href="#cb8-39" tabindex="-1"></a><span class="st">       Fed - Fasted     BA         </span></span>
<span id="cb8-40"><a href="#cb8-40" tabindex="-1"></a><span class="st">       Screen Failure   SCRNFAIL   </span></span>
<span id="cb8-41"><a href="#cb8-41" tabindex="-1"></a><span class="st">       Fasted - Fed     AB         </span></span></code></pre></div>
<p>In the case of <code>examplinib_fe</code>, there are different
treatment arms defined in the DM domain that should probably be included
as covariates in the NIF file as they specify the sequence of fasted and
fed administrations (suggestion 1). A respective variable within the NIF
data set will be programmed once a basic NIF file has been generated
(see below).</p>
<p>Also, the SDTM data do not provide a relation between treatments and
analytes (suggestion 2). The parent drug name in the SDTM field
<code>EXTRT</code> (i.e., “EXAMPLINIB”) is different from the respective
analyte for the parent compound as specified in the field
<code>PCTESTCD</code> (i.e., “RS2023”). This is a common situation in
data from clinical studies.</p>
<p>To correctly associate pharmacokinetic concentrations with the
administration of the corresponding drug, a link needs to be provided
between the treament and the analyte. Similarly, metabolites (e.g.,
“RS2023487A”) need to be linked to their parent compound - particularly
if muliple drugs and metabolites are included in the data set.</p>
<div class="section level4">
<h4 id="analyte-and-metabolite-mappings">Analyte and metabolite mappings<a class="anchor" aria-label="anchor" href="#analyte-and-metabolite-mappings"></a>
</h4>
<p>To establish these relationships, treatment-analyte mappings must be
added to the <code>sdtm</code> object with
<code><a href="../reference/add_analyte_mapping.html">add_analyte_mapping()</a></code>. In this sample case, the analyte
“RS2023” refers to the (parent) plasma concentration for the drug
“EXAMPLINIB.”</p>
<p>To establish the relationships betwen metabolites and their parent
copounds, <code><a href="../reference/add_metabolite_mapping.html">add_metabolite_mapping()</a></code> can be used. In the
sample data, the <code>PCTESTCD</code> of “RS2023487A” represents a
metabolite of “RS2023”:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sdtm_expl</span> <span class="op">&lt;-</span> <span class="va">examplinib_fe</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_analyte_mapping.html">add_analyte_mapping</a></span><span class="op">(</span><span class="st">"EXAMPLINIB"</span>, <span class="st">"RS2023"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_metabolite_mapping.html">add_metabolite_mapping</a></span><span class="op">(</span><span class="st">"RS2023"</span>, <span class="st">"RS2023487A"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="nif-data-sets">NIF DATA SETS<a class="anchor" aria-label="anchor" href="#nif-data-sets"></a>
</h2>
<div class="section level3">
<h3 id="creating-nif-data-sets">Creating NIF data sets<a class="anchor" aria-label="anchor" href="#creating-nif-data-sets"></a>
</h3>
<!-- In addition to re-arranging and joining these SDTM data tables, certain standard -->
<!-- data imputations are automatically performed by the functions provided in this -->
<!-- package, some of which are discussed in more detail in the vignette "Imputations -->
<!-- and assumptions used by make_nif()". -->
<p>The following section summarizes the steps to create a NIF file from
an <code>sdtm</code> object.</p>
<div class="section level4">
<h4 id="basic-nif-file">Basic NIF file<a class="anchor" aria-label="anchor" href="#basic-nif-file"></a>
</h4>
<p>Most steps in the generation of a basic NIF file from an
<code>sdtm</code> object are automated in the <code><a href="../reference/make_nif.html">make_nif()</a></code>
function. The resulting <code>nif</code> object is a data table with
individual rows for individual administrations and observations and
follows the naming conventions summarized in <a href="https://doi.org/10.1002/psp4.12404" class="external-link">Bauer, CPT Pharmacometrics
Syst. Pharmacol. (2019)</a>.</p>
<p>Standard demographic information including SEX, AGE, RACE is taken
from the DM domain and merged into the data table. Baseline WEIGHT and
HEIGHT are taken from the VS domain.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nif_expl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_nif.html">new_nif</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_administration.html">add_administration</a></span><span class="op">(</span><span class="va">sdtm_expl</span>, <span class="st">"EXAMPLINIB"</span>, analyte <span class="op">=</span> <span class="st">"RS2023"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_observation.html">add_observation</a></span><span class="op">(</span><span class="va">sdtm_expl</span>, <span class="st">"pc"</span>, <span class="st">"RS2023"</span>, cmt <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>The output of the above code informs that there may be
pharmacokinetic data for multiple specimens in the PC domain, e.g.,
“PLASMA” and “URINE” or “FECES”. As no specimem was defined,
<code><a href="../reference/make_nif.html">make_nif()</a></code> takes what it considers the the most likely
(“PLASMA” in this case). Alternatively, the specimen of interest can be
explicitly provided (see <code>?make_nif()</code> for details).</p>
<p>Also, a data cut-off was applied that reflects the date and time of
the last observation. This may be relevant in multiple-dose studies
where further administrations may be recorded after the last
oberservation. These administration events are excluded from the NIF
file. If this default behavior is not wanted, the
<code>truncate_to_last_observation</code> attribute to
<code><a href="../reference/make_nif.html">make_nif()</a></code> should be set to <code>FALSE</code>.</p>
</div>
<div class="section level4">
<h4 id="study-specific-covariates">Study-specific covariates<a class="anchor" aria-label="anchor" href="#study-specific-covariates"></a>
</h4>
<p>In many clinical studies, participants are treated in subgroups or
serial treatment periods, for example, dose escalation cohorts,
cross-over periods with different formulations or co-administration of
drug interaction perpetrators, etc.. While DOSE is automatically
included as a continuous covariate, other categorical covariates may
need to be derived, e.g., from the study arm (ARM) field.</p>
<p>This sample study is a food effect study in which participants
received the test drug, EXAMPLINIB, fasted or fed in a randomized
sequence (see <code>ACTARM</code> and <code>ACTARMCD</code> in the
output of <code><a href="../reference/suggest.html">suggest()</a></code>, above). Another field for
consideration may be <code>EPOCH</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>nif_expl <span class="ot">&lt;-</span> <span class="fu">new_nif</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">add_administration</span>(sdtm_expl, <span class="st">"EXAMPLINIB"</span>, <span class="at">analyte =</span> <span class="st">"RS2023"</span>, <span class="at">keep =</span> <span class="st">"EPOCH"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="fu">add_observation</span>(sdtm_expl, <span class="st">"pc"</span>, <span class="st">"RS2023"</span>, <span class="at">cmt =</span> <span class="dv">2</span>, <span class="at">keep =</span> <span class="st">"EPOCH"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>nif_expl <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>  <span class="fu">distinct</span>(ACTARMCD, EPOCH)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>  ACTARMCD                  EPOCH</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="dv">1</span>       BA OPEN LABEL TREATMENT <span class="dv">1</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="dv">2</span>       BA OPEN LABEL TREATMENT <span class="dv">2</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="dv">3</span>       AB OPEN LABEL TREATMENT <span class="dv">1</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="dv">4</span>       AB OPEN LABEL TREATMENT <span class="dv">2</span></span></code></pre></div>
<p>In this example, to create a <code>FASTED</code> covariate field,
first the period number is derived from the <code>EPOCH</code> field,
and then the current <code>ACTARM</code> in that treatment period is
decoded to <code>FASTED</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nif_expl</span> <span class="op">&lt;-</span> <span class="va">nif_expl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>PERIOD <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html" class="external-link">str_sub</a></span><span class="op">(</span><span class="va">EPOCH</span>, <span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>TREATMENT <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html" class="external-link">str_sub</a></span><span class="op">(</span><span class="va">ACTARMCD</span>, <span class="va">PERIOD</span>, <span class="va">PERIOD</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>FASTED <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">TREATMENT</span><span class="op">==</span><span class="st">"A"</span> <span class="op">~</span> <span class="fl">1</span>, .default<span class="op">=</span><span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/normalize_nif.html">normalize_nif</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Note the <code>silent = TRUE</code> modifier that omits all messages
from <code><a href="../reference/make_nif.html">make_nif()</a></code>.</p>
<p>As a side note: Alternatively, the SDTM domain YL which provides data
on meals may be used for the derivation of the food status.</p>
<p>The NIF file includes now the additional fields <code>PERIOD</code>,
<code>TREATMENT</code> and <code>FASTED</code>, see the first few lines
of the the data (some fields de-selected to make the output fit to the
page width):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>nif_expl <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">select</span>(USUBJID, PERIOD, TREATMENT, FASTED, TIME, EVID, AMT, ANALYTE, DV) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>            USUBJID PERIOD TREATMENT FASTED TIME EVID AMT ANALYTE        DV</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="dv">1</span> <span class="dv">20230004001020001</span>      <span class="dv">1</span>         B      <span class="dv">0</span>  <span class="fl">0.0</span>    <span class="dv">1</span> <span class="dv">500</span>  RS2023        <span class="cn">NA</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="dv">2</span> <span class="dv">20230004001020001</span>      <span class="dv">1</span>         B      <span class="dv">0</span>  <span class="fl">0.0</span>    <span class="dv">0</span>   <span class="dv">0</span>  RS2023    <span class="fl">0.0000</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="dv">3</span> <span class="dv">20230004001020001</span>      <span class="dv">1</span>         B      <span class="dv">0</span>  <span class="fl">0.5</span>    <span class="dv">0</span>   <span class="dv">0</span>  RS2023  <span class="fl">607.8332</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="dv">4</span> <span class="dv">20230004001020001</span>      <span class="dv">1</span>         B      <span class="dv">0</span>  <span class="fl">1.0</span>    <span class="dv">0</span>   <span class="dv">0</span>  RS2023 <span class="fl">1734.4646</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="dv">5</span> <span class="dv">20230004001020001</span>      <span class="dv">1</span>         B      <span class="dv">0</span>  <span class="fl">1.5</span>    <span class="dv">0</span>   <span class="dv">0</span>  RS2023 <span class="fl">2176.6537</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="dv">6</span> <span class="dv">20230004001020001</span>      <span class="dv">1</span>         B      <span class="dv">0</span>  <span class="fl">2.0</span>    <span class="dv">0</span>   <span class="dv">0</span>  RS2023 <span class="fl">3472.0221</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="data-disposition">Data disposition<a class="anchor" aria-label="anchor" href="#data-disposition"></a>
</h3>
<p>It is generally advisable to explore data sets before proceeding into
any more complex analyses.</p>
<p>The <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function provides a general overview on
the data disposition in a <code>nif</code> data set:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">summary</span>(nif_expl)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="sc">-----</span> NONMEM input <span class="fu">file</span> (NIF) object summary <span class="sc">-----</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>Data from <span class="dv">20</span> subjects across one study<span class="sc">:</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a> STUDYID      N    </span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a> <span class="dv">2023000400</span>   <span class="dv">20</span>   </span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>Males<span class="sc">:</span> <span class="dv">17</span>, females<span class="sc">:</span> <span class="dv">3</span> (<span class="dv">15</span>%)</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>Administered drugs<span class="sc">:</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a> RS2023</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>Analytes<span class="sc">:</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a> RS2023</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>Subjects per dose levels<span class="sc">:</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a> RS2023   N    </span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a> <span class="dv">500</span>      <span class="dv">20</span>   </span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="dv">680</span> observations<span class="sc">:</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a> CMT   ANALYTE   N     </span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a> <span class="dv">2</span>     RS2023    <span class="dv">680</span>   </span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>Subjects with dose reductions</span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a> RS2023   </span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a> <span class="dv">0</span>        </span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a></span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a>Treatment duration overview<span class="sc">:</span></span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a> PARENT   min   max   mean   median   </span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a> RS2023   <span class="dv">2</span>     <span class="dv">2</span>     <span class="dv">2</span>      <span class="dv">2</span>        </span></code></pre></div>
<p>Further to the above text output, the <code>nif</code> summary object
can also be plotted for a quick graphical overview on the distribution
of the baseline demographic data in the subject population and the
analytes included in the <code>nif</code> data set. Note the
<code>ìnvisible(capture.output())</code> construct around the
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function in the below code. This is used to omit
some non-graphical output:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span></span>
<span>  <span class="va">nif_expl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="nif-vignette_files/figure-html/unnamed-chunk-15-1.png" width="288"><img src="nif-vignette_files/figure-html/unnamed-chunk-15-2.png" width="288"><img src="nif-vignette_files/figure-html/unnamed-chunk-15-3.png" width="288"><img src="nif-vignette_files/figure-html/unnamed-chunk-15-4.png" width="288"><img src="nif-vignette_files/figure-html/unnamed-chunk-15-5.png" width="288"></p>
</div>
<div class="section level3">
<h3 id="plasma-concentration-data">Plasma concentration data<a class="anchor" aria-label="anchor" href="#plasma-concentration-data"></a>
</h3>
<p>NIF objects allow basic ploting functionality using
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, directly applied to the <code>nif</code> object.
The below shows some examples for common exploratory tasks.</p>
<p>In the simplest exploratory plot, all analytes are shown over
time:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">nif_expl</span><span class="op">)</span></span></code></pre></div>
<p><img src="nif-vignette_files/figure-html/unnamed-chunk-16-1.png" width="480"></p>
<p>To check the integrity of the data set, if often makes sense to plot
the analyte concentrations over time-after-dose (TAD).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nif_expl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>time <span class="op">=</span> <span class="st">"TAD"</span>, analyte <span class="op">=</span> <span class="st">"RS2023"</span>, points <span class="op">=</span> <span class="cn">T</span>, lines <span class="op">=</span> <span class="cn">F</span>, log <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="nif-vignette_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<p>Modifiers to the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function allow common
adjustments. To show, e.g., the food effect on the parent compound,
“RS2023” in individual subjects, limiting the time axis to 24 h and
showing the nominal time instead of the actual time:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nif_expl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>analyte <span class="op">=</span> <span class="st">"RS2023"</span>, group <span class="op">=</span> <span class="st">"FASTED"</span>, max_time <span class="op">=</span> <span class="fl">24</span>, mean <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>       points <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="nif-vignette_files/figure-html/unnamed-chunk-18-1.png" width="480"></p>
<p>The following shows the mean plasma concentration profiles aver all
subjects, over 24 h by the food status:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nif_expl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span> analyte <span class="op">=</span> <span class="st">"RS2023"</span>, group <span class="op">=</span> <span class="st">"FASTED"</span>, max_time <span class="op">=</span> <span class="fl">24</span>, mean <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="nif-vignette_files/figure-html/unnamed-chunk-19-1.png" width="480"></p>
<p>There are further options, refer to <code>?plot.nif()</code> for
details.</p>
<p>For a quick overview, use <code><a href="../reference/nif_viewer.html">nif_viewer()</a></code> to show
individual subjects interactively:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nif_viewer.html">nif_viewer</a></span><span class="op">(</span><span class="va">nif_expl</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="non-compartmental-analysis">Non-compartmental analysis<a class="anchor" aria-label="anchor" href="#non-compartmental-analysis"></a>
</h3>
<p>The current version of the <code>nif</code> package includes
rudimentary support for non-compartmental pharmacokinetic analysis. the
<code><a href="../reference/nca.html">nca()</a></code> function is essentially a wrapper around the
functions provided by the <code>PKNCA</code> package.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>nca <span class="ot">&lt;-</span> nif_expl <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="fu">nca</span>(<span class="at">analyte =</span> <span class="st">"RS2023"</span>,</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>      <span class="at">group =</span> <span class="st">"FASTED"</span>)</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>NCA<span class="sc">:</span> Group by FASTED</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>nca <span class="sc">%&gt;%</span> </span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>  <span class="fu">nca_summary_table</span>(<span class="at">group=</span><span class="st">"FASTED"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<table class="table">
<colgroup>
<col width="8%">
<col width="6%">
<col width="3%">
<col width="17%">
<col width="17%">
<col width="16%">
<col width="14%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left">FASTED</th>
<th align="right">DOSE</th>
<th align="right">n</th>
<th align="left">aucinf.obs</th>
<th align="left">auclast</th>
<th align="left">cmax</th>
<th align="left">half.life</th>
<th align="left">tmax</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0</td>
<td align="right">500</td>
<td align="right">20</td>
<td align="left">26108.59 (36)</td>
<td align="left">22571.41 (30)</td>
<td align="left">3724.63 (13)</td>
<td align="left">18.72 (22)</td>
<td align="left">2 (1.5; 4)</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="right">500</td>
<td align="right">20</td>
<td align="left">26226.11 (38)</td>
<td align="left">22435.29 (31)</td>
<td align="left">2913.77 (16)</td>
<td align="left">19 (25)</td>
<td align="left">4 (2; 6)</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Rainer Strotmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
