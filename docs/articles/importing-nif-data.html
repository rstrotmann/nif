<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Importing NIF data sets • nif</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Importing NIF data sets">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nif</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.63.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/nif.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/multiple-dose-example.html">Example: Multiple-dose study</a></li>
    <li><a class="dropdown-item" href="../articles/nif-formulas.html">Data definition using formulas</a></li>
    <li><a class="dropdown-item" href="../articles/nif-imputations.html">Imputations and assumptions</a></li>
    <li><a class="dropdown-item" href="../articles/importing-nif-data.html">Importing NIF data sets</a></li>
    <li><a class="dropdown-item" href="../articles/pharmaverse-example.html">Example: Pharmaverse SDTM data</a></li>
    <li><a class="dropdown-item" href="../articles/multiple-study-example.html">More than one study in a NIF dataset</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstrotmann/nif/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Importing NIF data sets</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstrotmann/nif/blob/HEAD/vignettes/importing-nif-data.Rmd" class="external-link"><code>vignettes/importing-nif-data.Rmd</code></a></small>
      <div class="d-none name"><code>importing-nif-data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">INTRODUCTION<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<ul>
<li>NIF data can be imported</li>
<li>nif objects by default contain more information than minimally
required by the NONMEM specification</li>
<li>ANALYTE, PARENT, DOSE and TAFD fields are automatically
generated</li>
<li>other fields may be derived by renaming terms</li>
</ul>
<p>The code in this vignette depends on the following packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstrotmann/nif" class="external-link">nif</a></span><span class="op">)</span></span></code></pre></div>
<p>For this demonstration, we use a minimal nif dataset that contains
data from 2 subjects with single administrations into compartment 1, and
observations up to 6 hours from compartment 2:</p>
<pre><code>ID,TIME,AMT,RATE,EVID,DV,CMT,MDV
1,0,5,0,1,.,1,1
1,0,0,0,0,0,2,0
1,0.5,0,0,0,0.0024,2,0
1,1,0,0,0,0.0072,2,0
1,1.5,0,0,0,0.0157,2,0
1,2,0,0,0,0.0209,2,0
1,3,0,0,0,0.0148,2,0
1,4,0,0,0,0.0133,2,0
1,6,0,0,0,0.0055,2,0
2,0,5,0,1,.,1,1
2,0,0,0,0,0,2,0
2,0.5,0,0,0,0.0036,2,0
2,1,0,0,0,0.0128,2,0
2,1.5,0,0,0,0.0228,2,0
2,2,0,0,0,0.0272,2,0
2,3,0,0,0,0.0256,2,0
2,4,0,0,0,0.0197,2,0
2,6,0,0,0,0.0117,2,0</code></pre>
<p>The dataset contains the minimally expected columns, ID, TIME, AMT,
RATE, EVID, DV, CMT, MDV, and is provided as a csv file
(<code>csv_file_name</code>).</p>
</div>
<div class="section level2">
<h2 id="importing-nif-data">IMPORTING NIF DATA<a class="anchor" aria-label="anchor" href="#importing-nif-data"></a>
</h2>
<p>The external data can be imported as a nif object using
<code><a href="../reference/import_nif.html">import_nif()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nif</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_nif.html">import_nif</a></span><span class="op">(</span><span class="va">csv_file_name</span>, format <span class="op">=</span> <span class="st">"csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nif</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID TIME EVID AMT CMT MDV RATE     DV</span></span>
<span><span class="co">#&gt; 1  1  0.0    1   5   1   1    0     NA</span></span>
<span><span class="co">#&gt; 2  1  0.0    0   0   2   0    0 0.0000</span></span>
<span><span class="co">#&gt; 3  1  0.5    0   0   2   0    0 0.0024</span></span>
<span><span class="co">#&gt; 4  1  1.0    0   0   2   0    0 0.0072</span></span>
<span><span class="co">#&gt; 5  1  1.5    0   0   2   0    0 0.0157</span></span>
<span><span class="co">#&gt; 6  1  2.0    0   0   2   0    0 0.0209</span></span></code></pre></div>
<p>The resulting object behaves as a regular <code>nif</code> object,
for example, it can be summarized or plotted or otherwise explored (see
<code>vignette("nif-tutorial")</code> for more information):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">nif</span><span class="op">)</span></span>
<span><span class="co">#&gt; ----- NONMEM Input Format (NIF) data summary -----</span></span>
<span><span class="co">#&gt; Data from 2 subjects across 0 studies:</span></span>
<span><span class="co">#&gt;   N   </span></span>
<span><span class="co">#&gt;   2    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sex distribution:</span></span>
<span><span class="co">#&gt;   SEX      N   percent   </span></span>
<span><span class="co">#&gt;   male     0   0         </span></span>
<span><span class="co">#&gt;   female   0   0         </span></span>
<span><span class="co">#&gt;   NA       2   100        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Treatments:</span></span>
<span><span class="co">#&gt;   CMT1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Analytes:</span></span>
<span><span class="co">#&gt;   CMT2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Subjects per dose level:</span></span>
<span><span class="co">#&gt;   CMT1   N   </span></span>
<span><span class="co">#&gt;   5      2    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 16 observations:</span></span>
<span><span class="co">#&gt;   CMT   N    </span></span>
<span><span class="co">#&gt;   2     16    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Subjects with dose reductions</span></span>
<span><span class="co">#&gt;   CMT1   </span></span>
<span><span class="co">#&gt;   0       </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Treatment duration overview:</span></span>
<span><span class="co">#&gt;   PARENT   min   max   mean   median   </span></span>
<span><span class="co">#&gt;   CMT1     1     1     1      1         </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Hash: cdd030cc138dc65c68205170cb355caa</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">nif</span>, log <span class="op">=</span> <span class="cn">T</span>, points <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="importing-nif-data_files/figure-html/unnamed-chunk-5-1.png" class="r-plt" alt="" width="700"></p>
<div class="section level3">
<h3 id="transformations">Transformations<a class="anchor" aria-label="anchor" href="#transformations"></a>
</h3>
<p>In some cases, the data to be imported include columns that should be
renamed or transformed to match the desired naming conventions, or to
otherwise support downstream analyses.</p>
<p>For this demonstration, let’s assume that the ‘TIME’ field in the csv
file is also the nominal time, and we want to include it in the nif
object as ‘NTIME’. in addition, the values in DV should be transformed
from ng/ml to micromolar concentrations (assuming a MW of 400 g/mol).
<code><a href="../reference/import_nif.html">import_nif()</a></code> allows these transformations to be executed
during the data import. Transformation terms need to be provided in the
form of <code>new_field ~ transformation_term</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nif</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_nif.html">import_nif</a></span><span class="op">(</span></span>
<span>  <span class="va">csv_file_name</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"csv"</span>,</span>
<span>  <span class="va">NTIME</span> <span class="op">~</span> <span class="va">TIME</span>,</span>
<span>  <span class="va">DV</span> <span class="op">~</span> <span class="va">DV</span><span class="op">/</span><span class="fl">400</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nif</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID TIME NTIME EVID AMT CMT MDV RATE        DV</span></span>
<span><span class="co">#&gt; 1  1  0.0   0.0    1   5   1   1    0        NA</span></span>
<span><span class="co">#&gt; 2  1  0.0   0.0    0   0   2   0    0 0.000e+00</span></span>
<span><span class="co">#&gt; 3  1  0.5   0.5    0   0   2   0    0 6.000e-06</span></span>
<span><span class="co">#&gt; 4  1  1.0   1.0    0   0   2   0    0 1.800e-05</span></span>
<span><span class="co">#&gt; 5  1  1.5   1.5    0   0   2   0    0 3.925e-05</span></span>
<span><span class="co">#&gt; 6  1  2.0   2.0    0   0   2   0    0 5.225e-05</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rainer Strotmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
